<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Construction Takeoff Assistant</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      html,
      body {
        font-family: 'Manrope', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: radial-gradient(circle at top, #0f172a, #020617 55%);
      }
      .glass {
        backdrop-filter: blur(18px);
        background: linear-gradient(135deg, rgba(15,23,42,0.8), rgba(30,41,59,0.6));
        border: 1px solid rgba(148,163,184,0.12);
      }
      .sparkle {
        position: relative;
        isolation: isolate;
      }
      .sparkle::before {
        content: '';
        position: absolute;
        inset: -120px;
        background: radial-gradient(circle at top right, rgba(56,189,248,0.35), transparent 45%),
          radial-gradient(circle at bottom left, rgba(216,180,254,0.25), transparent 55%);
        filter: blur(40px);
        z-index: -1;
        opacity: 0.9;
      }
    </style>
  </head>
  <body class="min-h-full text-slate-100">
    <div class="relative overflow-hidden">
      <header class="pt-16 pb-12 sm:pt-24">
        <div class="mx-auto max-w-6xl px-4">
          <div class="grid gap-10 lg:grid-cols-2 lg:items-center">
            <div class="space-y-8">
              <span class="inline-flex items-center gap-2 rounded-full border border-sky-500/40 bg-sky-500/10 px-4 py-1 text-sm font-semibold text-sky-200">
                <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                </svg>
                Automated takeoffs, human insight ready
              </span>
              <h1 class="text-4xl font-bold tracking-tight text-white sm:text-5xl lg:text-6xl">
                Transform drawings into actionable estimates in minutes.
              </h1>
              <p class="text-lg leading-relaxed text-slate-300">
                Upload drawing exports, pick your trade, and let the assistant crunch quantities,
                materials, and labor with transparent checkpoints for human review.
              </p>
              <div class="flex flex-wrap gap-4">
                <a href="#workspace" class="inline-flex items-center rounded-full bg-sky-500 px-6 py-3 text-base font-semibold text-slate-950 shadow-lg shadow-sky-500/30 transition hover:-translate-y-0.5 hover:bg-sky-400">
                  Launch workspace
                  <svg class="ml-2 h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 12h13.5m0 0-4.5-4.5m4.5 4.5-4.5 4.5" />
                  </svg>
                </a>
                <a
                  href="https://github.com/twostraws/HackingWithSwift/tree/main/construction_takeoff"
                  class="inline-flex items-center gap-2 rounded-full border border-slate-600/60 bg-white/5 px-6 py-3 text-base font-semibold text-slate-200 transition hover:border-slate-400/80 hover:text-white"
                >
                  View docs
                </a>
              </div>
              <dl class="mt-8 grid grid-cols-2 gap-6 text-sm text-slate-300 sm:flex sm:gap-10">
                <div>
                  <dt class="font-semibold text-slate-200">Supported trades</dt>
                  <dd id="trade-count">{{ trades | length }}</dd>
                </div>
                <div>
                  <dt class="font-semibold text-slate-200">Human-in-the-loop checkpoints</dt>
                  <dd>Built-in</dd>
                </div>
                <div>
                  <dt class="font-semibold text-slate-200">Export format</dt>
                  <dd>Spreadsheet-ready CSV</dd>
                </div>
                <div>
                  <dt class="font-semibold text-slate-200">UX designed for</dt>
                  <dd>Estimators &amp; project teams</dd>
                </div>
              </dl>
            </div>
            <div class="sparkle">
              <div class="glass rounded-3xl p-8 shadow-2xl shadow-sky-900/60">
                <div class="flex items-center justify-between">
                  <h2 class="text-xl font-semibold text-white">Live takeoff preview</h2>
                  <span class="rounded-full bg-emerald-400/20 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-200">
                    Real-time
                  </span>
                </div>
                <div class="mt-8 space-y-6">
                  <div class="grid grid-cols-3 gap-4">
                    <div class="rounded-2xl border border-sky-300/10 bg-sky-300/5 p-4">
                      <p class="text-xs uppercase tracking-wide text-slate-300">Material</p>
                      <p class="mt-2 text-2xl font-semibold text-sky-200" id="hero-material-cost">$0</p>
                    </div>
                    <div class="rounded-2xl border border-emerald-300/10 bg-emerald-300/5 p-4">
                      <p class="text-xs uppercase tracking-wide text-slate-300">Labor</p>
                      <p class="mt-2 text-2xl font-semibold text-emerald-200" id="hero-labor-cost">$0</p>
                    </div>
                    <div class="rounded-2xl border border-fuchsia-300/10 bg-fuchsia-300/5 p-4">
                      <p class="text-xs uppercase tracking-wide text-slate-300">Total</p>
                      <p class="mt-2 text-2xl font-semibold text-fuchsia-200" id="hero-total-cost">$0</p>
                    </div>
                  </div>
                  <div>
                    <p class="text-sm text-slate-300">Latest review summary</p>
                    <p class="mt-2 rounded-xl border border-white/5 bg-white/5 p-4 text-sm text-slate-200" id="hero-review-summary">
                      Upload drawings to generate insights instantly.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main id="workspace" class="pb-24">
        <div class="mx-auto max-w-6xl px-4">
          <div class="glass rounded-3xl p-10 shadow-xl">
            <div class="flex flex-col gap-6 lg:flex-row lg:items-start">
              <section class="lg:w-1/3">
                <h2 class="text-2xl font-semibold text-white">Upload workspace</h2>
                <p class="mt-3 text-sm leading-relaxed text-slate-300">
                  Choose the subcontracting trade, drop in your JSON or ZIP export, and the assistant will
                  orchestrate quantity takeoffs, costing, and review items automatically.
                </p>
                <ul class="mt-6 space-y-3 text-sm text-slate-300">
                  <li class="flex items-start gap-3">
                    <span class="mt-1 inline-flex h-6 w-6 flex-none items-center justify-center rounded-full bg-sky-500/20 text-sky-300">1</span>
                    <span>Select trade and drawing export.</span>
                  </li>
                  <li class="flex items-start gap-3">
                    <span class="mt-1 inline-flex h-6 w-6 flex-none items-center justify-center rounded-full bg-sky-500/20 text-sky-300">2</span>
                    <span>Review the generated line items and human checkpoints.</span>
                  </li>
                  <li class="flex items-start gap-3">
                    <span class="mt-1 inline-flex h-6 w-6 flex-none items-center justify-center rounded-full bg-sky-500/20 text-sky-300">3</span>
                    <span>Download the spreadsheet-ready CSV for your estimate log.</span>
                  </li>
                </ul>
              </section>
              <section class="lg:w-2/3">
                <form id="takeoff-form" class="space-y-6" autocomplete="off">
                  <div>
                    <label for="trade" class="block text-sm font-medium text-slate-200">Trade</label>
                    <select
                      id="trade"
                      name="trade"
                      class="mt-2 block w-full rounded-2xl border-0 bg-slate-900/60 px-4 py-3 text-sm text-slate-100 shadow-inner shadow-black/40 focus:border-sky-400 focus:ring-2 focus:ring-sky-500/60"
                      required
                    >
                      <option value="" disabled selected>Select a trade</option>
                      {% for trade in trades %}
                      <option value="{{ trade }}">{{ trade.replace('_', ' ').title() }}</option>
                      {% endfor %}
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-slate-200">Drawing export</label>
                    <div
                      id="drop-zone"
                      class="mt-2 flex min-h-[180px] cursor-pointer flex-col items-center justify-center rounded-3xl border border-dashed border-slate-500/60 bg-slate-900/60 p-6 text-center transition hover:border-sky-400/80 hover:bg-slate-900/80"
                    >
                      <input id="drawing-file" name="drawing" type="file" accept=".json,.zip" class="hidden" required />
                      <svg class="h-12 w-12 text-slate-400" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9m0 0-3 3m3-3 3 3m6 3.75A2.25 2.25 0 0016.75 18h-9.5A2.25 2.25 0 005 15.75v-7.5A2.25 2.25 0 007.25 6h4.443a2.25 2.25 0 011.59.659l3.557 3.557a2.25 2.25 0 01.66 1.59V15" />
                      </svg>
                      <p class="mt-4 text-base font-semibold text-white" id="drop-zone-title">Drag &amp; drop files here</p>
                      <p class="mt-1 text-sm text-slate-300" id="drop-zone-subtitle">JSON or ZIP exports up to 25MB.</p>
                      <p class="mt-4 text-xs text-slate-400">Need sample data? Use the <code>docs/sample_drawing.json</code> file included with the project.</p>
                    </div>
                  </div>
                  <div class="flex flex-wrap items-center gap-4">
                    <button
                      type="submit"
                      class="inline-flex items-center gap-2 rounded-full bg-sky-500 px-6 py-3 text-sm font-semibold text-slate-950 shadow-lg shadow-sky-500/30 transition hover:-translate-y-0.5 hover:bg-sky-400"
                    >
                      <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                      </svg>
                      Run takeoff
                    </button>
                    <a
                      id="download-btn"
                      href="#"
                      class="inline-flex items-center gap-2 rounded-full border border-slate-600/60 bg-white/5 px-6 py-3 text-sm font-semibold text-slate-200 transition hover:border-slate-400/80 hover:text-white disabled:pointer-events-none disabled:opacity-40"
                      download="estimate.csv"
                    >
                      <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M7.5 10.5L12 15m0 0l4.5-4.5M12 15V3" />
                      </svg>
                      Download CSV
                    </a>
                  </div>
                  <p id="error-banner" class="hidden rounded-2xl border border-rose-500/30 bg-rose-500/10 px-4 py-3 text-sm text-rose-100"></p>
                </form>
              </section>
            </div>

            <div class="mt-12 border-t border-white/5 pt-10">
              <div id="loading-state" class="hidden items-center gap-3 rounded-2xl border border-slate-600/50 bg-slate-900/60 px-4 py-3 text-sm text-slate-200">
                <svg class="h-5 w-5 animate-spin text-sky-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v3m6.364.636l-2.121 2.121M21 12h-3m-.636 6.364l-2.121-2.121M12 21v-3m-6.364.636l2.121-2.121M3 12h3m.636-6.364l2.121 2.121" />
                </svg>
                Processing takeoffâ€¦ This usually takes a few seconds.
              </div>

              <div id="results" class="hidden space-y-10">
                <div class="grid gap-6 md:grid-cols-2 xl:grid-cols-4">
                  <div class="rounded-2xl border border-sky-300/20 bg-sky-300/10 p-5">
                    <p class="text-xs uppercase tracking-wide text-sky-100">Material cost</p>
                    <p class="mt-2 text-3xl font-semibold text-sky-50" id="summary-material-cost">$0</p>
                  </div>
                  <div class="rounded-2xl border border-emerald-300/20 bg-emerald-300/10 p-5">
                    <p class="text-xs uppercase tracking-wide text-emerald-100">Labor cost</p>
                    <p class="mt-2 text-3xl font-semibold text-emerald-50" id="summary-labor-cost">$0</p>
                  </div>
                  <div class="rounded-2xl border border-fuchsia-300/20 bg-fuchsia-300/10 p-5">
                    <p class="text-xs uppercase tracking-wide text-fuchsia-100">Total cost</p>
                    <p class="mt-2 text-3xl font-semibold text-fuchsia-50" id="summary-total-cost">$0</p>
                  </div>
                  <div class="rounded-2xl border border-amber-300/20 bg-amber-300/10 p-5">
                    <p class="text-xs uppercase tracking-wide text-amber-100">Labor hours</p>
                    <p class="mt-2 text-3xl font-semibold text-amber-50" id="summary-labor-hours">0</p>
                  </div>
                </div>

                <div class="grid gap-6 lg:grid-cols-[1.4fr,1fr]">
                  <section class="rounded-3xl border border-white/5 bg-slate-900/60 p-6">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                      <div>
                        <h3 class="text-xl font-semibold text-white">Line items</h3>
                        <p class="text-sm text-slate-300">Structured estimate ready for spreadsheets.</p>
                      </div>
                      <div class="flex gap-4 text-xs text-slate-300">
                        <span class="inline-flex items-center gap-1 rounded-full border border-slate-600/60 px-3 py-1">
                          <span class="h-2 w-2 rounded-full bg-emerald-400"></span>
                          <span id="meta-drawings">0 drawings</span>
                        </span>
                        <span class="inline-flex items-center gap-1 rounded-full border border-slate-600/60 px-3 py-1">
                          <span class="h-2 w-2 rounded-full bg-sky-400"></span>
                          <span id="meta-elements">0 elements</span>
                        </span>
                        <span class="inline-flex items-center gap-1 rounded-full border border-slate-600/60 px-3 py-1">
                          <span class="h-2 w-2 rounded-full bg-fuchsia-400"></span>
                          <span id="meta-lines">0 line items</span>
                        </span>
                      </div>
                    </div>
                    <div class="mt-6 overflow-hidden rounded-2xl border border-white/5">
                      <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-white/5 text-sm">
                          <thead class="bg-slate-900/70 text-left text-xs uppercase tracking-wide text-slate-300">
                            <tr>
                              <th scope="col" class="px-5 py-3">Description</th>
                              <th scope="col" class="px-5 py-3">Quantity</th>
                              <th scope="col" class="px-5 py-3">Unit</th>
                              <th scope="col" class="px-5 py-3">Material $/unit</th>
                              <th scope="col" class="px-5 py-3">Material cost</th>
                              <th scope="col" class="px-5 py-3">Labor hours</th>
                              <th scope="col" class="px-5 py-3">Labor $/hr</th>
                              <th scope="col" class="px-5 py-3">Labor cost</th>
                            </tr>
                          </thead>
                          <tbody id="line-items" class="divide-y divide-white/5 bg-slate-900/40"></tbody>
                        </table>
                      </div>
                    </div>
                  </section>

                  <section class="flex flex-col gap-6">
                    <div class="rounded-3xl border border-white/5 bg-slate-900/60 p-6">
                      <h3 class="text-xl font-semibold text-white">Review focus</h3>
                      <p class="mt-2 text-sm text-slate-300">
                        These checkpoints highlight assumptions and required confirmations before issuing the estimate.
                      </p>
                      <ul id="review-items" class="mt-5 space-y-4"></ul>
                      <p id="review-empty" class="mt-5 rounded-2xl border border-emerald-500/20 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100">
                        No human review items. You're clear to proceed!
                      </p>
                    </div>
                    <div class="rounded-3xl border border-white/5 bg-gradient-to-br from-sky-500/10 to-fuchsia-500/10 p-6 text-sm text-slate-200">
                      <h3 class="text-lg font-semibold text-white">Workflow tips</h3>
                      <ul class="mt-3 list-disc space-y-2 pl-5">
                        <li>Drop multiple drawing JSON files in a ZIP to keep related floors together.</li>
                        <li>Iterate quickly by tweaking pricing or production rates in the trade estimator modules.</li>
                        <li>Export the CSV directly into your estimating workbook and link to live dashboards.</li>
                      </ul>
                    </div>
                  </section>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
    <script src="/static/app.js" defer></script>
  </body>
</html>
